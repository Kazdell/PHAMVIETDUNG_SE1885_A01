@model PHAMVIETDUNG_SE1885_A01_FE.Presentation.ViewModels.SystemAccountViewModel

@{
    ViewData["Title"] = "Edit Profile";
}

<div class="container-fluid px-lg-5 py-4">
    <div class="row justify-content-center">
        <div class="col-xl-9 col-lg-10">
            <!-- Page Header -->
            <div class="mb-4 animate__animated animate__fadeInDown">
                <h2 class="fw-bold mb-1 text-dark">
                    <i class="bi bi-person-gear text-primary me-2"></i>Edit Profile
                </h2>
                <p class="text-muted mb-0">Update your personal information and security settings</p>
            </div>

            <form asp-action="EditProfile" class="needs-validation" novalidate>
                <div asp-validation-summary="ModelOnly" class="alert alert-danger rounded-3 shadow-sm mb-4 border-0"></div>
                <input type="hidden" asp-for="AccountId" />
                
                <div class="row g-4">
                    <!-- Left Column: Personal Info -->
                    <div class="col-lg-8">
                        <!-- Personal Information Card -->
                        <div class="card border-0 shadow-sm rounded-4 mb-4 animate__animated animate__fadeInUp">
                            <div class="card-header bg-white border-bottom py-3 px-4">
                                <h5 class="card-title fw-bold mb-0">
                                    <i class="bi bi-person-circle me-2 text-primary"></i>Personal Information
                                </h5>
                            </div>
                            <div class="card-body p-4">
                                <div class="row g-4">
                                    <div class="col-12">
                                        <label class="form-label fw-semibold text-dark">
                                            <i class="bi bi-person me-1 text-muted"></i>Full Name
                                        </label>
                                        <input asp-for="AccountName" class="form-control form-control-lg bg-light border-0" placeholder="Enter your full name" />
                                        <span asp-validation-for="AccountName" class="text-danger small mt-1 d-block"></span>
                                    </div>
                                    
                                    <div class="col-12">
                                        <label class="form-label fw-semibold text-dark">
                                            <i class="bi bi-envelope me-1 text-muted"></i>Email Address
                                            <i class="bi bi-lock-fill ms-1 text-warning" title="Email cannot be changed"></i>
                                        </label>
                                        <input asp-for="AccountEmail" class="form-control form-control-lg bg-white border" placeholder="Email address" disabled style="opacity: 0.6; cursor: not-allowed;" />
                                        <div class="form-text mt-2">
                                            <i class="bi bi-info-circle me-1"></i>Contact your administrator to change your email address
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Security Settings Card -->
                        <div class="card border-0 shadow-sm rounded-4 animate__animated animate__fadeInUp animate__delay-1s">
                            <div class="card-header bg-white border-bottom py-3 px-4">
                                <h5 class="card-title fw-bold mb-0">
                                    <i class="bi bi-shield-lock me-2 text-primary"></i>Security Settings
                                </h5>
                            </div>
                            <div class="card-body p-4">
                                <div class="alert alert-info border-0 bg-info-subtle mb-4 rounded-3">
                                    <div class="d-flex align-items-start gap-2">
                                        <i class="bi bi-lightbulb-fill text-info mt-1"></i>
                                        <div class="small">
                                            <strong>Password Update:</strong> Leave the "New Password" field blank if you don't want to change your password. You must provide your current password to make any changes.
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="row g-4">
                                    <div class="col-12">
                                        <label class="form-label fw-semibold text-dark">
                                            <i class="bi bi-key me-1 text-muted"></i>Current Password
                                            <span class="text-danger">*</span>
                                        </label>
                                        <input asp-for="OldPassword" class="form-control form-control-lg bg-light border-0" type="password" placeholder="Enter your current password" />
                                        <span asp-validation-for="OldPassword" class="text-danger small mt-1 d-block"></span>
                                    </div>
                                    
                                    <div class="col-md-6">
                                        <label class="form-label fw-semibold text-dark">
                                            <i class="bi bi-shield-check me-1 text-muted"></i>New Password
                                        </label>
                                        <input asp-for="NewPassword" class="form-control form-control-lg bg-light border-0" type="password" placeholder="Enter new password (optional)" />
                                        <span asp-validation-for="NewPassword" class="text-danger small mt-1 d-block"></span>
                                    </div>
                                    
                                    <div class="col-md-6">
                                        <label class="form-label fw-semibold text-dark">
                                            <i class="bi bi-shield-check me-1 text-muted"></i>Confirm New Password
                                        </label>
                                        <input type="password" class="form-control form-control-lg bg-light border-0" placeholder="Confirm new password" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Right Column: Profile Summary -->
                    <div class="col-lg-4">
                        <div class="card border-0 shadow-sm rounded-4 sticky-top animate__animated animate__fadeInRight" style="top: 100px;">
                            <div class="card-body p-4 text-center">
                                <div class="mb-3">
                                    <div class="rounded-circle bg-gradient d-inline-flex align-items-center justify-content-center text-white fw-bold shadow-lg" 
                                         style="width: 80px; height: 80px; font-size: 2rem; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                                        @(Model.AccountName?.Substring(0, 1).ToUpper() ?? "U")
                                    </div>
                                </div>
                                <h5 class="fw-bold text-dark mb-1">@Model.AccountName</h5>
                                <p class="text-muted small mb-3">@Model.AccountEmail</p>
                                <span class="badge bg-info-subtle text-info border border-info-subtle rounded-pill px-3 py-2 mb-4">
                                    <i class="bi bi-shield-check me-1"></i>Staff Editor
                                </span>
                                
                                <hr class="my-3 opacity-25">
                                
                                <div class="text-start mb-4">
                                    <div class="d-flex align-items-center justify-content-between">
                                        <span class="small text-muted">Account Status</span>
                                        <span class="badge bg-success-subtle text-success border border-success-subtle">Active</span>
                                    </div>
                                </div>
                                
                                <div class="d-grid gap-2">
                                    <button type="submit" class="btn btn-primary btn-lg rounded-pill shadow-sm hover-lift">
                                        <i class="bi bi-check-lg me-2"></i>Save Changes
                                    </button>
                                    <a asp-action="Profile" class="btn btn-light btn-lg rounded-pill border">
                                        <i class="bi bi-x-lg me-2"></i>Cancel
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </form>
        </div>
    </div>
</div>

<style>
    .form-control:focus { 
        box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.1); 
        border-color: var(--primary-color); 
        background-color: #fff !important;
    }
    .hover-lift { 
        transition: transform 0.2s, box-shadow 0.2s; 
    }
    .hover-lift:hover { 
        transform: translateY(-2px); 
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); 
    }
</style>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}
